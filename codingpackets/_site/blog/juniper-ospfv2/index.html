



<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth scroll-pt-[4.5rem]">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    
      <link rel="shortcut icon" href="/favicon/favicon.ico" type="image/x-icon">
    
    
    
      <link rel="stylesheet" href="/css/highlightjs/tokyo-night-dark.min.css">
      <link rel="stylesheet" href="/css/fontawesome/css/all.min.css">
    

    
      <link rel="stylesheet" href="/css/app.css">
    
    
      <script src="/js/highlightjs/highlightjs-11.7.0.min.js"></script>
      <script src="/js/highlightjs/terraform.js"></script>
      <script defer src="/js/fontawesome/js/all.js"></script>
    

    
      <script defer src="/js/custom/back-to-top.js"></script>
      <script defer src="/js/custom/light-switch.js"></script>
    

    
      <script>
        hljs.registerLanguage('terraform', window.hljsDefineTerraform);
        hljs.highlightAll();
      </script>
    

    
    

    <title>codingpackets.com</title>
  </head>

  <body class="bg-stone-100/30 dark:bg-gray-950 tracking-wide antialiased">

    <!-- NAVBAR START -->
<nav id="navbar" class="w-full py-3 bg-gray-900 text-xl shadow-lg fixed inset-x-0 top-0 z-50">
  <div class="font-serif font-bold tracking-wide flex justify-center items-center py-1">
    <div>
      <a class="text-neutral-400 hover:text-neutral-100 p-0" href="/">Me</a>
    </div>
    <div class="px-4">
      <p class="text-neutral-400 p-0">|</p>
    </div>
    <div>
      <a class="text-neutral-400 hover:text-neutral-100" href="/blog/">Blog</a>
    </div>
    <div class="px-4">
      <p class="text-neutral-400 p-0">|</p>
    </div>
    <div>
      <a class="text-neutral-400 hover:text-neutral-100" href="/blog/recent/">Recent</a>
    </div>
    <div class="px-4">
      <p class="text-neutral-400 p-0">|</p>
    </div>
    <div class="-mt-6 -ml-1">
      <labeL class="relative inline-block">
        <input type="checkbox" id="light-switch" class="opacity-0 w-0 h-0">
        <img id="light-bulb" class="opacity-90 hover:opacity-60 dark:opacity-60 dark:hover:opacity-100 p-0 w-7" src="/img/light-bulb-64-light.png" alt="on/off">
      </labeL>
    </div>
  </div>  
</nav>
<!-- NAVBAR END -->

    <div class="w-full">
      
  
    
<!-- PAGE HEADER START -->
<div class="grid grid-cols-12 gap-8">
  <div class="invisible md:visible md:col-span-3">
  </div>

  <div class="col-span-12 px-5 md:col-span-6">
    <div id="page-header" class="text-center md:pt-20 md:pb-4 md:mb-0 pt-12 pb-0 -mb-12">
      <h1 class="pb-1 md:pb-2">Juniper OSPFv2</h1>
      
      
        <p class="text-neutral-500 dark:text-neutral-600 text-lg italic py-0">
          published: 5th of February 2019
        </p>
      
    </div>
  </div>

  <div class="invisible md:visible md:col-span-3">
  </div>
</div>
<!-- PAGE HEADER END -->

  


      <!-- CONTENT START -->
      <div class="grid grid-cols-12 gap-8">

        <!-- COLUMN 1 START -->
        <div class="invisible md:visible md:col-span-3 rounded-md">
        </div>
        <!-- COLUMN 1 END -->

        <!-- COLUMN 2 START -->
        <div class="col-span-12 px-5 md:col-span-6 rounded-md">
          <div class="text-xl text-neutral-800 dark:text-neutral-400 font-medium leading-relaxed md:leading-relaxed">
            

  <h3 id="overview">Overview</h3>
  <p>
    3 steps to configure OSPFv2.
  </p>

  <ul>
    <li>Create a router-id (optional)</li>
    <li>Assign OSPF neighbor facing interfaces to OSPF area</li>
    <li>Inject routes into OSPF via passive interfaces</li>
  </ul>


  <h3 id="configuration">Configuration</h3>
  <p>
    Create a router-id.
  </p>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">set routing-options router-id 10.255.1.1</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <p>
    Assign OSPF neighbor facing interfaces to OSPF area.
  </p>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">set protocols ospf area 0.0.0.0 interface ge-0/0/2.0</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <p>
    Inject routes into OSPF via passive interfaces.
  </p>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">set protocols ospf area 0.0.0.13 interface ge-0/0/3.0 passive
set protocols ospf area 0.0.0.14 interface ge-0/0/4.0 passive</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <h3 id="topology">Topology</h3>

  
<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="600px" 
    src="/img/network/topologies/2-router.svg" alt="network/topologies/2-router.svg">
</div>
<!-- IMAGE END -->



  <h4>P1R1</h4>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">set routing-options router-id 10.255.1.1
set protocols ospf area 0.0.0.0 interface ge-0/0/2.0
set protocols ospf area 0.0.0.13 interface ge-0/0/3.0 passive
set protocols ospf area 0.0.0.14 interface ge-0/0/4.0 passive</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <h4>P1R2</h4>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">set routing-options router-id 10.255.1.2
set protocols ospf area 0.0.0.0 interface ge-0/0/1.0
set protocols ospf area 0.0.0.23 interface ge-0/0/3.0 passive
set protocols ospf area 0.0.0.24 interface ge-0/0/4.0 passive</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <h3 id="verification">Verification</h3>
  <p>
    Show OSPF interfaces.
  </p>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">show ospf interface

# output

Interface           State   Area            DR ID           BDR ID          Nbrs
ge-0/0/2.0          BDR     0.0.0.0         10.255.1.2      10.255.1.1         1
ge-0/0/3.0          DRother 0.0.0.13        0.0.0.0         0.0.0.0            0
ge-0/0/4.0          DRother 0.0.0.14        0.0.0.0         0.0.0.0            0</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <p>
    Show OSPF neighbors.
  </p>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">show ospf neighbor

# output

Address          Interface              State     ID               Pri  Dead
10.1.12.2        ge-0/0/2.0             Full      10.255.1.2       128    37</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <p>
    Show OSPF routing table.
  </p>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">show route protocol ospf

# output

inet.0: 52 destinations, 52 routes (52 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

10.1.23.0/24       *[OSPF/10] 00:03:15, metric 2
                    > to 10.1.12.2 via ge-0/0/2.0
10.1.24.0/24       *[OSPF/10] 00:03:15, metric 2
                    > to 10.1.12.2 via ge-0/0/2.0
224.0.0.5/32       *[OSPF/10] 00:03:25, metric 1
                      MultiRecv

inet6.0: 86 destinations, 86 routes (86 active, 0 holddown, 0 hidden)</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <p>
    Show OSPF topology table.
  </p>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">show ospf route

# output

Topology default Route Table:

Prefix             Path  Route      NH       Metric NextHop       Nexthop
                   Type  Type       Type            Interface     Address/LSP
10.255.1.2         Intra Area BR    IP            1 ge-0/0/2.0    10.1.12.2
10.1.12.0/24       Intra Network    IP            1 ge-0/0/2.0
10.1.13.0/24       Intra Network    IP            1 ge-0/0/3.0
10.1.14.0/24       Intra Network    IP            1 ge-0/0/4.0
10.1.23.0/24       Inter Network    IP            2 ge-0/0/2.0    10.1.12.2
10.1.24.0/24       Inter Network    IP            2 ge-0/0/2.0    10.1.12.2</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <p>
    show OSPF link state database.
  </p>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">show ospf database

# output

    OSPF database, Area 0.0.0.0
 Type       ID               Adv Rtr           Seq      Age  Opt  Cksum  Len
Router  *10.255.1.1       10.255.1.1       0x80000002   267  0x22 0xe106  36
Router   10.255.1.2       10.255.1.2       0x80000003   271  0x22 0xdd06  36
Network  10.1.12.2        10.255.1.2       0x80000001   272  0x22 0xf703  32
Summary *10.1.13.0        10.255.1.1       0x80000002   267  0x22 0xc0b   28
Summary *10.1.14.0        10.255.1.1       0x80000002   267  0x22 0x115   28
Summary  10.1.23.0        10.255.1.2       0x80000002   311  0x22 0x9774  28
Summary  10.1.24.0        10.255.1.2       0x80000002   311  0x22 0x8c7e  28

    OSPF database, Area 0.0.0.13
 Type       ID               Adv Rtr           Seq      Age  Opt  Cksum  Len
Router  *10.255.1.1       10.255.1.1       0x80000001   272  0x22 0xc23e  36
Summary *10.1.12.0        10.255.1.1       0x80000003   262  0x22 0x1502  28
Summary *10.1.14.0        10.255.1.1       0x80000002   267  0x22 0x115   28
Summary *10.1.23.0        10.255.1.1       0x80000001   262  0x22 0xa963  28
Summary *10.1.24.0        10.255.1.1       0x80000001   262  0x22 0x9e6d  28

    OSPF database, Area 0.0.0.14
 Type       ID               Adv Rtr           Seq      Age  Opt  Cksum  Len
Router  *10.255.1.1       10.255.1.1       0x80000001   272  0x22 0xcb34  36
Summary *10.1.12.0        10.255.1.1       0x80000003   262  0x22 0x1502  28
Summary *10.1.13.0        10.255.1.1       0x80000002   267  0x22 0xc0b   28
Summary *10.1.23.0        10.255.1.1       0x80000001   262  0x22 0xa963  28
Summary *10.1.24.0        10.255.1.1       0x80000001   262  0x22 0x9e6d  28</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->



  <p>
    Show OSPF message exchange.
  </p>
  
<!-- CODE BLOCK START -->
<div id="code-block" class="py-2">
  <div class="bg-stone-100/30 border-4 rounded-t-lg border-b-4 py-1 text-center font-bold font-mono border-zinc-800 dark:bg-[#1a1b26] dark:border-gray-200/20">
    <span class="">cmd</span>
  </div>
  <div class="font-mono leading-tight">
    <pre class=""><code class="language-text hljs px-5 border-b-4 border-l-4 border-r-4 border-zinc-800 rounded-b-lg dark:border-gray-200/20">show ospf statistics

# output

Packet type             Total                  Last 5 seconds
                   Sent      Received        Sent      Received
   Hello             43            40           0             0
     DbD              3             2           0             0
   LSReq              1             1           0             0
LSUpdate              2             2           0             0
   LSAck              2             2           0             0

DBDs retransmitted     :                    0, last 5 seconds :          0
LSAs flooded           :                    3, last 5 seconds :          0
LSAs flooded high-prio :                    0, last 5 seconds :          0
LSAs retransmitted     :                    0, last 5 seconds :          0
LSAs transmitted to nbr:                    1, last 5 seconds :          0
LSAs requested         :                    3, last 5 seconds :          0
LSAs acknowledged      :                    5, last 5 seconds :          0

Flood queue depth      :               0
Total rexmit entries   :               0
db summaries           :               0
lsreq entries          :               0

Receive errors:
  None</code></pre>
  </div>
</div>
<!-- CODE BLOCK END -->






            
  


            
  


            
  
    
  <!-- LINKS START -->
  <div class="pb-2">
    <h3 id="links" class="">Links</h3>
      
        <p class="text-xl break-words">
          <a class="  break-words text-sky-600 no-underline hover:decoration-2 hover:underline hover:underline-offset-4 dark:text-gray-200" href="https://www.juniper.net/documentation/en_US/junos/topics/example/ospf-single-area-configuring.html" target=_blank>https://www.juniper.net/documentation/en_US/junos/topics/example/ospf-single-area-configuring.html</a>
        </p>
      
        <p class="text-xl break-words">
          <a class="  break-words text-sky-600 no-underline hover:decoration-2 hover:underline hover:underline-offset-4 dark:text-gray-200" href="http://notthenetwork.me/blog/2013/08/02/junos-basics-single-area-ospf/" target=_blank>http://notthenetwork.me/blog/2013/08/02/junos-basics-single-area-ospf/</a>
        </p>
      
  </div>
  <!-- LINKS END -->

  


            
  
    
<!-- TAGS START -->
  <div id="tags" class="pb-2">
    <div class="flex flex-wrap justify-center">
      
        <div class="pr-2 font-semibold italic lowercase tracking-wide text-rose-600 no-underline hover:underline hover:decoration-2 hover:underline-offset-4">
          <i class="-mr-1.5 text-2xl">#</i>
          <a href="/blog/tag/#juniper" class="text-xl">juniper</a>
        </div>
      
        <div class=" font-semibold italic lowercase tracking-wide text-rose-600 no-underline hover:underline hover:decoration-2 hover:underline-offset-4">
          <i class="-mr-1.5 text-2xl">#</i>
          <a href="/blog/tag/#networking" class="text-xl">networking</a>
        </div>
      
    </div>
  </div>
<!-- TAGS END -->

  


            
  
<!-- BLANK PAGE START -->
<div id="blank-page">
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
</div>
<!-- BLANK PAGE END -->


          </div>
        </div>
        <!-- COLUMN 2 END -->

        <!-- COLUMN 3 START -->
        <div class="invisible md:visible md:col-span-3 max-h-screen sticky top-20">
          
  
    
<!-- TABLE OF CONTENTS START -->
<div id="table-of-contents" class="invisible md:visible h-4/5 overflow-y-auto">
  <div class="">
    <h5 class="">On this page</h5>
  </div>
  <div class="">
    
      
        <div class="px-1">
          <a class="menu-item font-normal text-lg text-sky-600 no-underline hover:decoration-2 hover:underline hover:underline-offset-4 dark:text-gray-200" href="#overview">
          Overview
          </a>
        </div>
      
    
      
        <div class="px-1">
          <a class="menu-item font-normal text-lg text-sky-600 no-underline hover:decoration-2 hover:underline hover:underline-offset-4 dark:text-gray-200" href="#configuration">
          Configuration
          </a>
        </div>
      
    
      
        <div class="px-1">
          <a class="menu-item font-normal text-lg text-sky-600 no-underline hover:decoration-2 hover:underline hover:underline-offset-4 dark:text-gray-200" href="#topology">
          Topology
          </a>
        </div>
      
    
      
        <div class="px-1">
          <a class="menu-item font-normal text-lg text-sky-600 no-underline hover:decoration-2 hover:underline hover:underline-offset-4 dark:text-gray-200" href="#verification">
          Verification
          </a>
        </div>
      
    
      
        <div class="px-1">
          <a class="menu-item font-normal text-lg text-sky-600 no-underline hover:decoration-2 hover:underline hover:underline-offset-4 dark:text-gray-200" href="#links">
          Links
          </a>
        </div>
      
    
      
        <div class="px-1">
          <a class="menu-item font-normal text-lg text-sky-600 no-underline hover:decoration-2 hover:underline hover:underline-offset-4 dark:text-gray-200" href="#tags">
          Tags
          </a>
        </div>
      
      
  </div>
</div>
<!-- TABLE OF CONTENTS END -->

  

        </div>
        <!-- COLUMN 3 END -->

      </div>
      <!-- CONTENT END -->

      <!-- BACK TO TOP START -->
<div id="back-to-top" class="hidden fixed bottom-20 right-16 rounded-full font-semibold text-gray-900 bg-neutral-400 hover:bg-neutral-100">
  <button type="button" class="">
    <i class="fas fa-arrow-circle-up fa-3x"></i>
  </button>
</div>
<!-- BACK TO TOP END -->
    </div>
  
    <!-- FOOTER START -->
<div id="footer" class="fixed inset-x-0 bottom-0">
  <div class="flex justify-center w-full py-4 bg-gray-900 shadow-lg">
    <div class="text-center">
      <a class="px-2 font-semibold text-neutral-400 hover:text-neutral-100" href="https://twitter.com/codingpackets" target="_blank"><i class="fab fa-twitter fa-2x"></i></a>
      <a class="px-2 font-semibold text-neutral-400 hover:text-neutral-100" href="https://www.twitch.tv/codingpackets" target="_blank"><i class="fab fa-twitch fa-2x"></i></a>
      <a class="px-2 font-semibold text-neutral-400 hover:text-neutral-100" href="https://github.com/bwks" target="_blank"><i class="fab fa-github fa-2x"></i></a>
      <a class="px-2 font-semibold text-neutral-400 hover:text-neutral-100" href="/blog/feed.xml" target="_blank"><i class="fa fa-rss fa-2x"></i></a>
    </div>
  </div>
</div>
<!-- FOOTER END -->

  </body>

</html>
