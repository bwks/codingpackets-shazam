


<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth scroll-pt-20">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    
      <link rel="shortcut icon" href="/favicon/favicon.ico" type="image/x-icon">
    
    
    
      <link rel="stylesheet" href="/css/highlightjs/highlightjs-xt256.css">
      <link rel="stylesheet" href="/css/fontawesome/css/all.min.css">
    

    
      <link rel="stylesheet" href="/css/app.css">
    

    
      <script src="/js/highlightjs/highlightjs-11.5.0.min.js"></script>
      <script src="/js/highlightjs/terraform.js"></script>
      <script defer src="/js/fontawesome/js/all.js"></script>
    

    
      <script defer src="/js/custom/back-to-top.js"></script>
      <script defer src="/js/custom/light-switch.js"></script>
    

    
      <script>
        hljs.registerLanguage('terraform', window.hljsDefineTerraform);
        hljs.highlightAll();
      </script>
    

    
    

    <title>codingpackets.com</title>
  </head>

  <body class="bg-stone-50 dark:bg-black">

    <!-- NAVBAR START -->
<nav id="navbar" class="w-full py-3 bg-zinc-900 text-xl shadow-lg fixed inset-x-0 top-0 z-50">
  <div class="flex justify-center items-center py-1">
    <div>
      <a class="text-neutral-400 hover:text-neutral-100 p-0" href="/">Me</a>
    </div>
    <div class="px-4">
      <p class="text-neutral-400 p-0">|</p>
    </div>
    <div>
      <a class="text-neutral-400 hover:text-neutral-100" href="/blog/">Blog</a>
    </div>
    <div class="px-4">
      <p class="text-neutral-400 p-0">|</p>
    </div>
    <div>
      <a class="text-neutral-400 hover:text-neutral-100" href="/blog/recent/">Recent</a>
    </div>
    <div class="px-4">
      <p class="text-neutral-400 p-0">|</p>
    </div>
    <div class="-mt-6 -ml-1">
      <labeL class="relative inline-block">
        <input type="checkbox" id="light-switch" class="opacity-0 w-0 h-0">
        <img id="light-bulb" class="opacity-90 hover:opacity-60 dark:opacity-60 dark:hover:opacity-100 p-0 w-7" src="/img/light-bulb-64-light.png" alt="on/off">
      </labeL>
    </div>
  </div>  
</nav>
<!-- NAVBAR END -->

    <div class="w-full">
      
  
    
<!-- PAGE HEADER START -->
<div id="page-header" class="pt-20 -mb-4 pb-0 px-5 text-center sm:pb-4 sm:mb-0">
  <h1 class="pb-1 sm:pb-2">AWS S3 Cloudfront Static Website Hosting</h1>
  <div class="">
    
      <p class="text-neutral-400 dark:text-neutral-600 text-lg italic p-0">
        updated: 1st of June 2020
      </p>
    
    
      <p class="text-neutral-400 dark:text-neutral-600 text-lg italic p-0">
        published: 9th of May 2020
      </p>
    
  </div>
</div>
<!-- PAGE HEADER END -->

  


      <!-- CONTENT START -->
      <div class="grid grid-cols-12 gap-8">

        <!-- COLUMN 1 START -->
        <div class="invisible md:visible md:col-span-3">
        </div>
        <!-- COLUMN 1 END -->

        <!-- COLUMN 2 START -->
        <div class="col-span-12 px-5 md:col-span-6">
          <div class="leading-relaxed text-xl text-gray-800 dark:text-neutral-400 font-medium">
            

<h3 id="intro">Intro</h3>
<p>
  I recently migrated my blog to AWS, since it was mostly static content I did not see much
  point in maintaining at VM and a tech stack just to to host static content. It was overkill.
  There are a lot of options for hosting a static site these days but since I am currently
  learning AWS so it makes sense to host it there.
</p>
<p>
  In this post I will go over the process I used to build out the required services and outline some of
  the gotcha I hit on the way.
</p>

<h3 id="aws-services">AWS Services</h3>
<p>
  AWS has a bajillion services and growing every year. They also have a number of
  <a class="text-sky-600 no-underline hover:text-sky-800" href="https://aws.amazon.com/websites/" target=_blank>options</a> available for hosting a
  website. I am using the the following services to host my website;
</p>
<ul>
  <li><b>Route 53</b> - DNS registration and management.</li>
  <li><b>Certificate Manager</b> - Create free TLS certificates for use with AWS services.</li>
  <li><b>S3</b> - An object store for static files.</li>
  <li><b>Cloud Front</b> - A globally distributed content delivery network (CDN).</li>
</ul>

<h4>Domain Name</h4>
<p>
  Firstly some background. I was initially hosting the DNS for
  <a class="text-sky-600 no-underline hover:text-sky-800" href="{{ links.rootPath.url }}" target=_blank>codingpackets.com</a> with Godaddy.
  I was pretty happy with them but there was an issue with
  redirects and I was getting a certificate error when using a bare domain IE:
  <i>https://codingpackets.com</i> without the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">www</i>
  .
  IE: <i>https://www.codingpackets.com</i>. This is related to the way S3 works as a website host
  adding <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">www</i>
   to the domain
  and Godaddy's inability to create a DNS alias record. For this reason I transferred the
  <a class="text-sky-600 no-underline hover:text-sky-800" href="{{ links.rootPath.url }}" target=_blank>codingpackets.com</a> domain to Route 53.
</p>

<p>
  Before you move onto the next steps it's best to have your domain registered and active with
  Route 53. There are cheaper alternatives out there, but you don't get the ease of integration that
  you have with all your eggs in the AWS walled garden. The rest of this post assumes you have
  your domain registered and ready to go.
</p>


<!-- NOTE BLOCK START -->
<div id="note-block" class="pt-2 pb-4">
  <div class="shadow-md shadow-zinc-400 bg-sky-100 rounded border-l-8 border-l-sky-900 dark:border-l-sky-600 dark:bg-sky-800 dark:shadow-none">
    <div class="px-4 pt-4 pb-2 text-sky-900 dark:text-zinc-900"><i class="fa fa-check-circle" aria-hidden="true"></i> <b>Note</b></div>
    <div class="px-4 pb-4 dark:text-zinc-900">
    This post does not cover registering or transferring a domain to AWS. For instructions
    to register a domain see <a class="text-sky-600 no-underline hover:text-sky-800" href="https://aws.amazon.com/getting-started/hands-on/get-a-domain/" target=_blank>here</a>
    and to transfer a domain see <a class="text-sky-600 no-underline hover:text-sky-800" href="https://aws.amazon.com/premiumsupport/knowledge-center/transfer-domain-to-aws/" target=_blank>here</a>.</div>
  </div>
</div>
<!-- NOTE BLOCK END -->



<h3 id="s3">S3</h3>
<h4>Create and S3 Bucket</h4>
<p>
  An S3 bucket will be used to store the sites content IE: HTML, CSS, JS and image files.
  To create a bucket navigate to:
</p>


<!-- BREADCRUMBS START -->
<div id="breadcrumbs" class="pb-2 font-mono font-bold text-xl tracking-tight">
  <nav class="rounded px-3 py-2 w-fit bg-zinc-200 shadow-md shadow-zinc-400 dark:bg-zinc-900 dark:shadow-inner dark:shadow-black">
    <ol class="flex flex-wrap">
      
        <li class="text-sky-600 dark:text-sky-800">Services</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">S3</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Create bucket</li>
        
      
    </ol>
  </nav>
</div>
<!-- BREADCRUMBS END -->


<p>
  Enter the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Bucket name</i>
  , untick the
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Block <i>all</i> public access</i>
   checkbox
  and tick the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">acknowledge</i>
   warning.
  Then click on <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Create bucket</i>
   button.
</p>

<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="600px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/create-bucket-1.png" alt="blog/aws-s3-cloudfront-static-website-hosting/create-bucket-1.png">
</div>
<!-- IMAGE END -->


<h4>Apply Bucket Policy</h4>
<p>
  Next up apply permission to the bucket with a bucket policy. Navigate to:
</p>


<!-- BREADCRUMBS START -->
<div id="breadcrumbs" class="pb-2 font-mono font-bold text-xl tracking-tight">
  <nav class="rounded px-3 py-2 w-fit bg-zinc-200 shadow-md shadow-zinc-400 dark:bg-zinc-900 dark:shadow-inner dark:shadow-black">
    <ol class="flex flex-wrap">
      
        <li class="text-sky-600 dark:text-sky-800">Services</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">S3</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">&lt;bucket-name&gt;</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Permissions</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Bucket Policy</li>
        
      
    </ol>
  </nav>
</div>
<!-- BREADCRUMBS END -->


<p>
  The bucket needs to be publicly accessible since people could be coming to your site from
  anywhere on the internet. Paste in the following code snippet replacing the
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">ARN</i>
   with the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">ARN</i>
  
  for your bucket.
</p>


<!-- CODE BLOCK START -->
<div id="code-block" class="pt-2 pb-4">
  <div class="rounded-lg border-4 border-zinc-900 shadow-md shadow-zinc-400 dark:shadow-none">
    <div class="py-1 text-center font-bold font-mono border-b-4 border-zinc-900">
      <span class="">cmd</span>
    </div>
    <div class="font-mono">
      <pre><code class="language-json hljs px-5 dark:opacity-80 rounded-b">{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "PublicReadGetObject",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::&lt;bucket-arn&gt;/*"
        }
    ]
}</code></pre>
    </div>
  </div>
</div>
<!-- CODE BLOCK END -->



<!-- NOTE BLOCK START -->
<div id="note-block" class="pt-2 pb-4">
  <div class="shadow-md shadow-zinc-400 bg-sky-100 rounded border-l-8 border-l-sky-900 dark:border-l-sky-600 dark:bg-sky-800 dark:shadow-none">
    <div class="px-4 pt-4 pb-2 text-sky-900 dark:text-zinc-900"><i class="fa fa-check-circle" aria-hidden="true"></i> <b>Note</b></div>
    <div class="px-4 pb-4 dark:text-zinc-900">
    The <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">ARN</i>
     can be found above the the code
    block next to the words <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Bucket policy editor</i>
    in the AWS console.</div>
  </div>
</div>
<!-- NOTE BLOCK END -->


<h4>Enable Static Website Hosting</h4>
<p>
  Now enable the bucket to act as static website host by navigating to:
</p>


<!-- BREADCRUMBS START -->
<div id="breadcrumbs" class="pb-2 font-mono font-bold text-xl tracking-tight">
  <nav class="rounded px-3 py-2 w-fit bg-zinc-200 shadow-md shadow-zinc-400 dark:bg-zinc-900 dark:shadow-inner dark:shadow-black">
    <ol class="flex flex-wrap">
      
        <li class="text-sky-600 dark:text-sky-800">Services</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">S3</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">&lt;bucket-name&gt;</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Properties</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Static website hosting</li>
        
      
    </ol>
  </nav>
</div>
<!-- BREADCRUMBS END -->


<p>
  Select the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Use this bucket as a website</i>
   button and
  enter the name of the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Index document</i>
   and
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Error document</i>
   then click the
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">save</i>
   button.
</p>

<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="400px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/create-bucket-2.png" alt="blog/aws-s3-cloudfront-static-website-hosting/create-bucket-2.png">
</div>
<!-- IMAGE END -->



<!-- IMPORTANT BLOCK START -->
<div id="important-block" class="pt-2 pb-4">
  <div class="shadow-md shadow-zinc-400 bg-amber-100 rounded border-l-8 border-amber-500/90 dark:bg-amber-700 dark:border-l-amber-500 dark:shadow-none">
    <div class="px-4 pt-4 pb-2 text-amber-500/90 dark:text-zinc-900"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> <b>Important</b></div>
    <div class="px-4 pb-4 dark:text-zinc-900">
    Take note of the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Endpoint</i>
     without the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">http://</i> (highlighted above). This will be
    needed for your CloudFront distribution.</div>
  </div>
</div>
<!-- NOTE BLOCK END -->


<h4>Upload Content to S3 Bucket</h4>
<p>
  Assuming you have generated your static site already you can upload the content to S3.
  I use the <i class="px-2 py-1 font-mono font-semibold rounded bg-zinc-900 text-emerald-400 dark:text-emerald-700">aws S3 sync</i> from the AWS
  <a class="text-sky-600 no-underline hover:text-sky-800" href="https://aws.amazon.com/cli/" target=_blank>CLI</a> tool. My static files are stored in the
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">_site</i>
   directory.
</p>

<!-- CODE BLOCK START -->
<div id="code-block" class="pt-2 pb-4">
  <div class="rounded-lg border-4 border-zinc-900 shadow-md shadow-zinc-400 dark:shadow-none">
    <div class="py-1 text-center font-bold font-mono border-b-4 border-zinc-900">
      <span class="">cmd</span>
    </div>
    <div class="font-mono">
      <pre><code class="language-text hljs px-5 dark:opacity-80 rounded-b">aws s3 sync _site/ s3://&lt;bucket-name&gt;</code></pre>
    </div>
  </div>
</div>
<!-- CODE BLOCK END -->


<p>
  You can now navigate to the HTTP endpoint from the previous step to verify that your
  content is accessible.
</p>

<h3 id="certificate-manager">Certificate Manager</h3>
<h4>Request a Certificate</h4>
<p>
  Now lets generate a TLS certificate so that our site can be accessed securely over
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">HTTPS</i>
  . Navigate to:
</p>


<!-- BREADCRUMBS START -->
<div id="breadcrumbs" class="pb-2 font-mono font-bold text-xl tracking-tight">
  <nav class="rounded px-3 py-2 w-fit bg-zinc-200 shadow-md shadow-zinc-400 dark:bg-zinc-900 dark:shadow-inner dark:shadow-black">
    <ol class="flex flex-wrap">
      
        <li class="text-sky-600 dark:text-sky-800">Services</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Certificate Manager</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Request a certificate</li>
        
      
    </ol>
  </nav>
</div>
<!-- BREADCRUMBS END -->


<p>
  Select the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Request a public certificate</i>
   radio button
  and press the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Request a certificate</i>
   button.
</p>


<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="800px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-1.png" alt="blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-1.png">
</div>
<!-- IMAGE END -->


<p>
  On the next screen enter the domain names you wish to have a certificate generated for.
  Enter both the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">bare</i>
   domain and the domain with the
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">www</i>
   and press the
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Next</i>
   button.
</p>


<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="800px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-2.png" alt="blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-2.png">
</div>
<!-- IMAGE END -->


<p>
  Select the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">DNS validation</i>
   radio button and press the
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Next</i>
   button.
</p>


<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="800px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-3.png" alt="blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-3.png">
</div>
<!-- IMAGE END -->


<p>
  Enter tags if you wish and press the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Review</i>
   button.
</p>


<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="800px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-4.png" alt="blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-4.png">
</div>
<!-- IMAGE END -->


<p>
  Review everything is as you expect and then press the
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Confirm and request</i>
   button.
</p>


<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="800px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-5.png" alt="blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-5.png">
</div>
<!-- IMAGE END -->


<p>
  For each domain press the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Create record in Route 53</i>
   button.
  This will create a CNAME record that is used to confirm that you are the owner of the
  domain you are generating certificates for.
</p>


<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="800px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-6.png" alt="blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-6.png">
</div>
<!-- IMAGE END -->


<p>
  Once DNS has propagated the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Validation status</i>
   will
  change to <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Success</i>
  .
</p>


<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="800px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-7.png" alt="blog/aws-s3-cloudfront-static-website-hosting/request-a-certificate-7.png">
</div>
<!-- IMAGE END -->


<h3 id="cloud-front">Cloud Front</h3>
<p>
  CloudFront is the AWS global CDN. CloudFront caches content at edge locations close you your users
  allowing them to access your content faster. Also CloudFront must be used if you want to enable
  HTTPs with a custom DNS name (Not the AWS S3 URL) for your S3 hosted website.
</p>
<h4>Create a Distribution</h4>
<p>
  To create a Cloud Front distribution navigate to:
</p>


<!-- BREADCRUMBS START -->
<div id="breadcrumbs" class="pb-2 font-mono font-bold text-xl tracking-tight">
  <nav class="rounded px-3 py-2 w-fit bg-zinc-200 shadow-md shadow-zinc-400 dark:bg-zinc-900 dark:shadow-inner dark:shadow-black">
    <ol class="flex flex-wrap">
      
        <li class="text-sky-600 dark:text-sky-800">Services</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">CloudFront</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Web</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Get Started</li>
        
      
    </ol>
  </nav>
</div>
<!-- BREADCRUMBS END -->



<!-- NOTE BLOCK START -->
<div id="note-block" class="pt-2 pb-4">
  <div class="shadow-md shadow-zinc-400 bg-sky-100 rounded border-l-8 border-l-sky-900 dark:border-l-sky-600 dark:bg-sky-800 dark:shadow-none">
    <div class="px-4 pt-4 pb-2 text-sky-900 dark:text-zinc-900"><i class="fa fa-check-circle" aria-hidden="true"></i> <b>Note</b></div>
    <div class="px-4 pb-4 dark:text-zinc-900">
  This is a pretty big form and the next series of screen shots are from
  scrolling down on the form page.
</div>
  </div>
</div>
<!-- NOTE BLOCK END -->


<h5>Origin Settings</h5>

<!-- IMPORTANT BLOCK START -->
<div id="important-block" class="pt-2 pb-4">
  <div class="shadow-md shadow-zinc-400 bg-amber-100 rounded border-l-8 border-amber-500/90 dark:bg-amber-700 dark:border-l-amber-500 dark:shadow-none">
    <div class="px-4 pt-4 pb-2 text-amber-500/90 dark:text-zinc-900"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> <b>Important</b></div>
    <div class="px-4 pb-4 dark:text-zinc-900">
  In the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Origin Domain Name</i> paste in the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Endpoint</i>
   from the previous step when
  converting your S3 bucket to a website host. If you don't do this and
  select the S3 bucket from the dropdown you will get permission errors
  when trying to access the site.</div>
  </div>
</div>
<!-- NOTE BLOCK END -->

<h5>Default Cache Behaviour Settings</h5>
<p>
  Select the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Redirect HTTP to HTTPS</i>
  and the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">GET, HEAD</i>
   radio buttons.
</p>

<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="600px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/create-distribution-1.png" alt="blog/aws-s3-cloudfront-static-website-hosting/create-distribution-1.png">
</div>
<!-- IMAGE END -->

<h5>Distribution Settings</h5>
<p>
  Enter the domain names you requested certificates for
  in the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Alternate Domain Names</i>
  text box.
</p>
<p>
  Select the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Custom SSL Certificate</i>
   radio
  button and select the previously created certificate from Certificate
  Manager.
</p>

<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="800px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/create-distribution-2.png" alt="blog/aws-s3-cloudfront-static-website-hosting/create-distribution-2.png">
</div>
<!-- IMAGE END -->

<p>
  Select the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Security Policy</i>
  
  <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">TLSv1.1_2016</i>
   radio button. and
  press the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Create Distribution</i>
  
  button.
</p>

<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="800px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/create-distribution-3.png" alt="blog/aws-s3-cloudfront-static-website-hosting/create-distribution-3.png">
</div>
<!-- IMAGE END -->



<!-- NOTE BLOCK START -->
<div id="note-block" class="pt-2 pb-4">
  <div class="shadow-md shadow-zinc-400 bg-sky-100 rounded border-l-8 border-l-sky-900 dark:border-l-sky-600 dark:bg-sky-800 dark:shadow-none">
    <div class="px-4 pt-4 pb-2 text-sky-900 dark:text-zinc-900"><i class="fa fa-check-circle" aria-hidden="true"></i> <b>Note</b></div>
    <div class="px-4 pb-4 dark:text-zinc-900">
  Creating a CloudFront distribution can take 15-30 minutes.
</div>
  </div>
</div>
<!-- NOTE BLOCK END -->


<h3 id="route-53">Route 53</h3>
<p>
  Route 53 allows us to manage the DNS records for our domain.
</p>
<h4>Create and Alias Record</h4>
<p>
  An <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">alias record</i>
   allows us to point our domain to
  a CloudFront distribution. To create an alias record navigate to:
</p>


<!-- BREADCRUMBS START -->
<div id="breadcrumbs" class="pb-2 font-mono font-bold text-xl tracking-tight">
  <nav class="rounded px-3 py-2 w-fit bg-zinc-200 shadow-md shadow-zinc-400 dark:bg-zinc-900 dark:shadow-inner dark:shadow-black">
    <ol class="flex flex-wrap">
      
        <li class="text-sky-600 dark:text-sky-800">Services</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Route 53</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Hosted Zones</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">&lt;hosted-zone&gt;</li>
        
          <li><span class="mx-2 font-extrabold text-zinc-800 dark:text-inherit">&gt;</span></li>
        
      
        <li class="text-sky-600 dark:text-sky-800">Create Record Set</li>
        
      
    </ol>
  </nav>
</div>
<!-- BREADCRUMBS END -->



<p>
  Select the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Type</i>
   as <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">A</i>
  
  from the dropdown and select the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Alias: Yes</i>
  
  radio button. In the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Alias Target</i>
   select the
  previously created <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">CloudFront</i>
   distribution and
  press the <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">Save Record Set</i>
   button.
</p>

<!-- IMAGE START -->
<div class="pt-4 pb-6 flex justify-center">
  <img class="bg-white rounded-lg shadow-md shadow-zinc-400 dark:opacity-80 dark:shadow-none" 
    width="400px" 
    src="/img/blog/aws-s3-cloudfront-static-website-hosting/alias-record-1.png" alt="blog/aws-s3-cloudfront-static-website-hosting/alias-record-1.png">
</div>
<!-- IMAGE END -->


<p>
  Repeat the same process for a <i class="px-2 py-1 font-mono font-semibold rounded bg-neutral-200 border border-neutral-300 text-zinc-900 dark:bg-zinc-900 dark:text-neutral-400 dark:border-zinc-800">AAAA</i>
   record so that
  your site is also reachable over IPv6.
</p>

<h3 id="testing">Testing</h3>
<p>
  Once DNS has propagated you will be able to browse to your website and view all the
  glorious content.
</p>

<h3 id="cost">Cost</h3>
<p>
  Hosting my site on a DigitalOcean droplet was costing me $5 USD a month. The first month
  of hosting on AWS cost $2.54. So almost half the cost for a much better user experience
  and less futzing around with infrastructure. The following is the cost breakdown.
</p>
<ul>
  <li><b>Route 53</b> - $2.51</li>
  <li><b>S3</b> - $0.03</li>
</ul>

<h3 id="outro">Outro</h3>
<p>
  Hosting a static site on AWS is a pretty smooth process once you get your head
  around all the various bits an pieces. The global CDN makes it a nice user
  experience for your users where ever they may be in the world and the tight
  integration of the services makes it relatively painless to setup.
</p>



            
  


            
            

            
  
    
  <!-- LINKS START -->
  <div class="pb-2">
    <h3 id="links">Links</h3>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://stackoverflow.com/questions/49082709/redirect-to-index-html-for-s3-subfolder" target=_blank>https://stackoverflow.com/questions/49082709/redirect-to-index-html-for-s3-subfolder</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://stevepapa.com/how-to-specify-a-default-root-object-for-static-website-subdirectories-on-aws-cloudfront/" target=_blank>https://stevepapa.com/how-to-specify-a-default-root-object-for-static-website-subdirectories-on-aws-cloudfront/</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://medium.com/@sbuckpesch/setup-aws-s3-static-website-hosting-using-ssl-acm-34d41d32e394" target=_blank>https://medium.com/@sbuckpesch/setup-aws-s3-static-website-hosting-using-ssl-acm-34d41d32e394</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://www.davidbaumgold.com/tutorials/host-static-site-aws-s3-cloudfront/" target=_blank>https://www.davidbaumgold.com/tutorials/host-static-site-aws-s3-cloudfront/</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://aws.amazon.com/blogs/compute/implementing-default-directory-indexes-in-amazon-s3-backed-amazon-cloudfront-origins-using-lambdaedge/" target=_blank>https://aws.amazon.com/blogs/compute/implementing-default-directory-indexes-in-amazon-s3-backed-amazon-cloudfront-origins-using-lambdaedge/</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://www.freecodecamp.org/news/simple-site-hosting-with-amazon-s3-and-https-5e78017f482a/" target=_blank>https://www.freecodecamp.org/news/simple-site-hosting-with-amazon-s3-and-https-5e78017f482a/</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteAccessPermissionsReqd.html" target=_blank>https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteAccessPermissionsReqd.html</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://aws.amazon.com/premiumsupport/knowledge-center/cloudfront-serve-static-website/" target=_blank>https://aws.amazon.com/premiumsupport/knowledge-center/cloudfront-serve-static-website/</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://medium.com/@brodartec/hosting-a-static-site-with-https-enabled-using-aws-s3-cloudfront-and-godaddy-826dae41fdc6" target=_blank>https://medium.com/@brodartec/hosting-a-static-site-with-https-enabled-using-aws-s3-cloudfront-and-godaddy-826dae41fdc6</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://au.godaddy.com/community/Managing-Domains/CNAME-ANAME-or-ALIAS-support-for-APEX-domain/td-p/136281" target=_blank>https://au.godaddy.com/community/Managing-Domains/CNAME-ANAME-or-ALIAS-support-for-APEX-domain/td-p/136281</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://support.yondo.com/hc/en-us/articles/205794498-GoDaddy-Domain-Alias-Setup" target=_blank>https://support.yondo.com/hc/en-us/articles/205794498-GoDaddy-Domain-Alias-Setup</a>
        </p>
      
        <p class="text-xl">
          <a class="text-sky-600 no-underline hover:text-sky-800" href="https://simonecarletti.com/blog/2016/08/redirect-domain-https-amazon-cloudfront/" target=_blank>https://simonecarletti.com/blog/2016/08/redirect-domain-https-amazon-cloudfront/</a>
        </p>
      
  </div>
  <!-- LINKS END -->

  


            
  
    
<!-- TAGS START -->
  <div id="tags" class="pb-2">
    <div class="flex justify-center">
      
        <div class=" text-rose-700 hover:text-rose-900 font-semibold italic lowercase tracking-wide">
          <i class="-mr-1.5 text-2xl">#</i>
          <a href="/blog/tag/#aws" class="text-xl">aws</a>        
        </div>
      
    </div>
  </div>
<!-- TAGS END -->

  


            
  
<!-- BLANK PAGE START -->
<div id="blank-page">
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
    <br>
  
</div>
<!-- BLANK PAGE END -->


          </div>
        </div>
        <!-- COLUMN 2 END -->

        <!-- COLUMN 3 START -->
        <div class="invisible md:visible md:col-span-3">
          
  
    
<!-- TABLE OF CONTENTS START -->
<div id="table-of-contents" class="invisible md:visible sticky top-20 overflow-y-auto">
  <div class="">
    <i class="not-italic font-semibold text-xl dark:text-neutral-600">On this page</i>
  </div>
  <div class="">
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#intro">
            Intro
          </a>
        </div>
      
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#aws-services">
            AWS Services
          </a>
        </div>
      
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#s3">
            S3
          </a>
        </div>
      
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#certificate-manager">
            Certificate Manager
          </a>
        </div>
      
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#cloud-front">
            Cloud Front
          </a>
        </div>
      
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#route-53">
            Route 53
          </a>
        </div>
      
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#testing">
            Testing
          </a>
        </div>
      
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#cost">
            Cost
          </a>
        </div>
      
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#outro">
            Outro
          </a>
        </div>
      
    
      
        <div class="px-2">
          <a class="text-sky-600 font-normal text-xl no-underline hover:text-sky-800" href="#links">
            Links
          </a>
        </div>
      
      
  </div>
</div>
<!-- TABLE OF CONTENTS END -->

  

        </div>
        <!-- COLUMN 3 END -->

      </div>
      <!-- CONTENT END -->

      <!-- BACK TO TOP START -->
<div id="back-to-top" class="hidden fixed bottom-20 right-16 rounded-full font-semibold text-zinc-900 bg-neutral-400 hover:bg-neutral-100">
  <button type="button" class="">
    <i class="fas fa-arrow-circle-up fa-3x"></i>
  </button>
</div>
<!-- BACK TO TOP END -->
    </div>
  
    <!-- FOOTER START -->
<div id="footer" class="fixed inset-x-0 bottom-0">
  <div class="flex justify-center w-full py-4 bg-zinc-900 shadow-lg">
    <div class="text-center">
      <a class="px-2 font-semibold text-neutral-400 hover:text-neutral-100" href="https://twitter.com/codingpackets" target="_blank"><i class="fab fa-twitter fa-2x"></i></a>
      <a class="px-2 font-semibold text-neutral-400 hover:text-neutral-100" href="https://www.twitch.tv/codingpackets" target="_blank"><i class="fab fa-twitch fa-2x"></i></a>
      <a class="px-2 font-semibold text-neutral-400 hover:text-neutral-100" href="https://github.com/bwks" target="_blank"><i class="fab fa-github fa-2x"></i></a>
      <a class="px-2 font-semibold text-neutral-400 hover:text-neutral-100" href="/blog/feed.xml" target="_blank"><i class="fa fa-rss fa-2x"></i></a>
    </div>
  </div>
</div>
<!-- FOOTER END -->

  </body>

</html>
